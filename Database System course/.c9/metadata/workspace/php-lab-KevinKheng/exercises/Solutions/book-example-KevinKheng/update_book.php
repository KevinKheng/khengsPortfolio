{"changed":false,"filter":false,"title":"update_book.php","tooltip":"/php-lab-KevinKheng/exercises/Solutions/book-example-KevinKheng/update_book.php","value":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n\t<title>Edit Book</title>\n</head>\n\n<body>\n\t<h1> Book-O-Rama Book Updated </h1>\n<?php\n\t$isbn=$_POST[\"isbn\"];\n\t$author=$_POST[\"author\"];\n\t$title=$_POST[\"title\"];\n\t$price=$_POST[\"price\"];\n\n\tif(!$isbn || !$author || !$title || !$price) {\n\t\techo \"You have not entered all required details.  Please go back and try again.\";\n\t\texit;\n\t}\n\n\t//format input\n\t$isbn = addslashes($isbn);\n\t$author = addslashes($author);\n\t$title = addslashes($title);\n\t$price = doubleval($price);\n\t//connect to the database\n\t@$db = new mysqli('localhost', 'howardcy', '', 'books');\n\n\n\tif ($db->connect_error) {\n\t\tdie('Connect Error ' . $db->connect_errno . ': ' . $db->connect_error);\n\t}\n\n\t$query = \"update books SET author = ?, title = ?, price = ? WHERE isbn =?\";\n\tif(\t$stmt = $db->prepare($query)){\n\t\t$stmt->bind_param(\"ssds\",$author, $title, $price, $isbn);\n\t  $stmt->execute();\n\n    if ($stmt->affected_rows == 1){\n    \techo \"<h2>New Values:</h2>\";\n    \techo \"<strong>ISBN: </strong>\". $isbn . \"<br/>\";\n    \techo \"<strong>Title: </strong>\". $title . \"<br/>\";\n    \techo \"<strong>Author: </strong>\". $author. \"<br/>\";\n    \techo \"<strong>Price: </strong>\". $price. \"<br/>\";\n    }\n}else{\n\t echo \"Prepare failed: (\" . $mysqli->errno . \") \" . $mysqli->error;\n}\n\n$db->close();\n\n?>\n<a href=\"show_books.php\">Return to Books</a>\n</body>\n\n</html>\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":47,"column":1},"end":{"row":47,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1512666342327}